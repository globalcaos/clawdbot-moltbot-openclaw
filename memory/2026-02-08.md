# 2026-02-08

## ðŸ”´ CRITICAL INCIDENT: Merge Disaster

**What happened:** I attempted to merge upstream without first checking if a prior merge was already incomplete. The repo had 26 files with unresolved conflict markers (including `package.json`), making the entire system non-functional.

**Root cause:** I assumed a fresh `git merge` without verifying the working tree was clean.

**Impact:** 26 files overwritten with upstream versions, losing local customizations.

**Recovery:**

- Backups preserved at `~/src/openclaw-backup-conflicted-files/`
- Restored budget tracking in `usage.ts` (token-usage-tracker wiring)
- Created Manus plugin to isolate Manus-specific code

**Lesson:** **ALWAYS run `git status` and check for conflict markers before ANY merge operation.**

```bash
# Pre-merge checklist
git status                           # Check for uncommitted changes
grep -r "<<<<<<< HEAD" . --include="*.ts" --include="*.json"  # Check for lingering conflicts
```

---

## âœ… Fork Sync Complete

**Branch:** `main` at `eb07a27ee`
**Upstream commits merged:** 519+
**Files changed:** 1563

### New Features from Upstream

- Telegram spoilers (#11543)
- Context overflow fix (#11664)
- Voyage AI embeddings (new memory backend)
- Feishu integration (full plugin)
- Usage dashboard (new UI views)
- Chinese docs (full zh-CN translation)

### Our Additions

- Manus plugin (`extensions/manus/`)
- Budget tracking restoration
- better-sqlite3 dependency (WhatsApp history)

### Skills Cleaned

- Removed `chatgpt-export` (superseded by chatgpt-exporter-ultimate on ClawHub)
- Removed `youtube` (superseded by youtube-ultimate on ClawHub)
- Created `token-control-panel-ultimate` (beta, in workspace, not published)

---

## ðŸ”§ Clean Fork Strategy Established

**Problem:** Every merge conflicts because we mix core modifications, skills, and personal config.

**Solution:**
| What | Where | Why |
|------|-------|-----|
| **Skills** | ClawHub | Independent versioning, no merge conflicts |
| **Personal config** | `~/.openclaw/workspace/` | Never in repo |
| **Useful features** | **PR to upstream** | If accepted, we don't maintain it |
| **Local-only hacks** | Plugins | Plugin system isolates them |

---

## ðŸ“¦ Manus Plugin Created

**Location:** `extensions/manus/`
**Purpose:** Standalone credit tracking for Manus AI integration

**Files:**

- `index.ts` - Plugin registration, gateway methods
- `src/tracker.ts` - Credit tracking logic
- `manus-watch.py` - Polling + auto-notification script
- `README.md` - Documentation

**Gateway methods registered:**

- `usage.manus.track` - Record task completion
- `usage.manus.summary` - Get usage summary
- `usage.manus.budget` - Get budget context

**Benefit:** No more modifying core `usage.ts` - plugin handles all Manus-specific code.

---

## ðŸ› UI Thinking Indicator Bug

**Symptom:** Thinking indicator stuck/always showing in webchat
**Status:** Investigating - rebuilt UI, awaiting confirmation
**Possible causes:**

- Stuck `chatRunId` state
- WebSocket state issue
- Cached old JS despite refresh

---

## ðŸ“ Skills Status

**On ClawHub (published):**

- youtube-ultimate v1.0.2
- whatsapp-ultimate v1.1.1
- agent-boundaries-ultimate v1.2.1
- agent-memory-ultimate v2.0.1
- shell-security-ultimate v1.0.0
- chatgpt-exporter-ultimate

**In workspace (not published):**

- token-control-panel-ultimate v0.1.0 (beta)

**In fork (to keep):**

- exec-display (source for token-control-panel)
- google-sheets (our creation)
- whatsapp-tools (unique contact sync scripts)
